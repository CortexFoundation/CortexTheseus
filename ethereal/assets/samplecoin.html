<html>
<head>
<title>jeffcoin</title>
<script type="text/javascript">
var jefcoinAddr = "3dff537f51350239abc95c76a5864aa605259e7d"

function createTransaction() {
	var addr = document.querySelector("#addr").value;
	var amount = document.querySelector("#amount").value;

	var data = "0x" + addr + "\n" + amount
	eth.createTx(jefcoinAddr, 0, "10000000", "250", data, function(tx) {
		debug("received tx hash:", tx)
	})
}

// Any test related actions here please
function tests() {
	eth.getKey(function(keys) {
		debug(keys)
	})
}

function init() {
	eth.watch(jefcoinAddr);

	eth.getKey(function(key) {
		eth.getStorage(jefcoinAddr, key, function(storage) {
			document.querySelector("#currentAmount").innerHTML = "Amount: " + storage;
		});

		eth.on("object:change", function(stateObject) {
			debug(stateObject);
			eth.getStorage(jefcoinAddr, key, function(storage) {
				document.querySelector("#currentAmount").innerHTML = "Amount: " + storage;
			});
		});
	});
}

</script>
<style type="text/css">
input[type="text"] {
	width: 300px;
}
</style>
</head>

<body onload="init();">
<h1>Jeff Coin</h1>

<img src="icon.png">
<div id="currentAmount"></div>

<div id="transactions">
	<input id="addr" type="text" placeholder="Receiver address"></input><br>
	<input id="amount" type="text" placeholder="Amount"></input><br>
	<button onclick="createTransaction();">Send Tx</button>
</div>

<div><button onclick="tests();">Tests</button></div>


<div id="debug" style="border: 1px solid block"></div>

</body>
</html>

